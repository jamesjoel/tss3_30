(function(l){var h=window.AmazonUIPageJS||window.P,q=h._namespace||h.attributeErrors,p=q?q("VSECommonComponentAssets",""):h;p.guardFatal?p.guardFatal(l)(p,window):p.execute(function(){l(p,window)})})(function(l,h,q){(function(){function p(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)})}h.vseFeatures=h.vseFeatures||{};var y=h.gatedP||{register:function(a,c,b,d,f){void 0===f&&(f=h.vseFeatures);l.now(a).execute(a+
"-prereg",function(e){e||f[c]||(f[c]=!0,d.resolve(b(d)).then(function(){l.now(a).execute(a+"-reg",function(b){b||(l.log("Gated registration failed to register module!","ERROR",a),f[c]=!1)})}))})},declare:function(a,c,b,d){void 0===d&&(d=h.vseFeatures);l.now(a).execute(a+"-prereg",function(f){f||d[c]||(d[c]=!0,l.declare(a,b))})}},t={count:function(a,c){var b=h.ue;b&&b.count("vse:csm:"+a,c)},emitSushiMetric:function(a,c,b){var d=this;c=c||"https://unagi-na.amazon.com/1/events/com.amazon.eel.vse.metricstest.nexus";
b=b||0;if(!(3<=b)){var f=JSON.stringify(a).replace(/\\\\/g,""),e={params:f,paramsFormat:"json",contentType:"application/json; charset\x3dutf-8",error:function(){d.emitSushiMetric(a,c,++b)}},g=navigator.userAgent.match(/iPhone/i),h=!1;l.now("mash").execute("vse-detect-mshop",function(){h=!0});var k=null!==g&&h;l.when("A").execute("Emit-VSE-Metrics",function(a){navigator&&navigator.sendBeacon&&!k?navigator.sendBeacon(c,f):a.post(c,e)})}},logFatal:function(a,c,b){h.ueLogError&&h.ueLogError(b,{logLevel:"FATAL",
attribution:a,message:c})},logError:function(a,c,b){h.ueLogError&&h.ueLogError(b,{logLevel:"ERROR",attribution:a,message:c})}},H={makeApplicationSushiPayloadBuilder:function(a,c){return function(b){var d={eventSource:c.eventSource,requestId:c.requestId,sessionId:c.sessionId,placementContext:c.placementContext,marketplaceId:c.marketplaceId,weblabIds:c.weblabIds,clientId:c.clientId,isInternal:c.isInternal.toString(),isRobot:c.isRobot.toString(),pageAsin:c.pageAsin,customerId:c.customerId,sessionType:c.sessionType||
1,refMarkers:c.refMarkers,eventId:p(),timestamp:new Date,userAgentData:navigator.userAgent,titleSessionId:0,videoAsin:0,pageUrl:null!==h.location.href?h.location.href.substring(0,500):"",videoAsinList:c.videoAsinList||""};return{events:[{data:a.$.extend(d,b)}]}}}},I={fetchLatestPageState:function(a,c){a.state.replace(c,JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3d"+c+"]").html()));return a.state(c)},isDefined:function(a){return"undefined"!==typeof a&&null!==a}},k={updateReftagParam:function(a,
c){return k.updateQueryStringParameter(a,"ref_?","ref",c)},updateQueryStringParameter:function(a,c,b,d){c=new RegExp("([?\x26/])"+c+"\x3d.*?(\x26|$)","i");var f=-1!==a.indexOf("?")?"\x26":"?";return a.match(c)?a.replace(c,"$1"+b+"\x3d"+d+"$2"):a+f+b+"\x3d"+d},generateUUID:function(){for(var a="",c=0;13>c;c++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return a},logFatal:function(a,c){var b="VSE_SHARE_WITH_FRIENDS_JS_WIDGET";c&&(b=b+"_"+
c);l.log(a,"FATAL",b);return!0},decodeEntities:function(a){var c=document.createElement("textarea");c.innerHTML=a;return c.value},triggerShare:function(a,c,b,d){if(c){c=screen.width;var f=screen.height;b=b?b:.7*c;d=d?d:.7*f;h.open(a,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+b+",height\x3d"+d+",top\x3d"+(f/2-d/2)+",left\x3d"+(c/2-b/2))}else h.open(a,"_self")},getPageData:function(a){return"undefined"!==typeof a.pageLevelStateKey?A.state(a.pageLevelStateKey):a.pageLevelData},buildUrl:function(a,
c){c=c||{};for(var b=h.navigator&&h.navigator.userAgent&&h.navigator.userAgent.match(/iPhone/i),d=Object.keys(c),f=0<d.length&&("sms:"!==a||!b)?"?":"",b=0;b<d.length;b++)"?"!==f&&(f+="\x26"),c[d[b]]&&(f+=d[b]+"\x3d"+encodeURIComponent(c[d[b]]));return a+f},generateReftags:function(a,c){var b,d;a=k.getPageData(a);"undefined"!==typeof a&&(b=a.clientRef,d=a.deviceTypeRef);b=b?b:"un";d=d?d:"un";a=c?c:"un";c=k.generateUUID();a="cm_sw_"+a;b=b+"_"+d+"_"+c;return{returnReftag:a+"_r_"+b,clickReftag:a+"_c_"+
b}}},J={share:function(a,c){c={facebook:{shareEndpoint:"https://www.facebook.com/dialog/share",params:function(a){return{href:k.decodeEntities(a.url),display:"popup",quote:a.quote?k.decodeEntities(a.quote):"",app_id:"164734381262"}},ref:"fb",height:450,width:700,isWebShare:!0},pinterest:{shareEndpoint:"https://www.pinterest.com/pin/create/button",params:function(a){return{url:k.decodeEntities(a.url),media:k.decodeEntities(a.image),description:k.decodeEntities(a.description)}},ref:"pi",height:620,
width:700,isWebShare:!0},twitter:{shareEndpoint:"https://twitter.com/intent/tweet",params:function(a){var b=k.decodeEntities(a.title);a=k.decodeEntities(a.url);if(b){var c=a?Math.min(a.length,20):-1;200<b.length+c+1&&(b=b.substring(0,200-(c+1+3))+"...")}return{text:b,url:a}},ref:"tw",height:470,width:670,isWebShare:!0},email:{shareEndpoint:"mailto:",params:function(a){return{subject:k.decodeEntities(a.title),body:k.decodeEntities(a.description)+"\n"+k.decodeEntities(a.url)}},ref:"em",height:470,width:670,
isWebShare:!1},sms:{shareEndpoint:"sms:",params:function(a){return{body:k.decodeEntities(a.title)+" "+k.decodeEntities(a.url)}},ref:"sm",height:470,width:670,isWebShare:!1},whatsapp:{shareEndpoint:"https://api.whatsapp.com/send",params:function(a){return{text:k.decodeEntities(a.description)+"\n"+k.decodeEntities(a.url)}},ref:"wa",height:470,width:670,isWebShare:!1}}[c];var b=k.generateReftags(a,c.ref);a.url=k.updateReftagParam(a.url,b.returnReftag);a=k.buildUrl(c.shareEndpoint,c.params(a));k.triggerShare(a,
c.isWebShare,c.width,c.height)}},v={sendRequest:function(a,b,n,d,f){a.ajax(b,{params:n,paramsFormat:"json",crossDomain:!0,method:"POST",contentType:"application/json",success:d,error:f})}},K=function(){function a(a,b){void 0===b&&(b={refTagRecorderEndPoint:"/gp/mobile/tag/",retryLimit:3});this.A=a;this.config=b}a.prototype.emitRefTag=function(a,b){void 0===b&&(b=0);if(!(b>=this.config.retryLimit)){var d=this;this.A.post(this.config.refTagRecorderEndPoint+"ref\x3d"+a,{error:function(){d.emitRefTag(a,
++b)}})}};return a}(),e=function(){function a(){}a.POSITIVE_VOTE="positive";a.NEGATIVE_VOTE="negative";a.NONE_VOTE="none";a.EMPTY_STRING="";a.DEFAULT_MIN_GUTTER=24;a.DEFAULT_HEIGHT_ANIMATION_SPEED=200;a.ATTR_ANIMATING="animating";a.ATTR_CURRENT_GUTTER="currentGutter";a.ATTR_FIRST_ITEM_FLUSH_LEFT="first_item_flush_left";a.ATTR_FIRST_VISIBLE_ITEM="firstVisibleItem";a.ATTR_HEIGHT_ANIMATION_SPEED="height_animation_speed";a.ATTR_HIDE_OFFSCREEN="hide_off_screen";a.ATTR_MAX_HEIGHT="maxHeight";a.ATTR_MIN_GUTTER=
"minimum_gutter_width";a.ATTR_PAGE_NUMBER="pageNumber";a.ATTR_PAGE_SIZE="pageSize";a.ATTR_SET_SIZE="set_size";a.ATTR_SHOW_PARTIAL="show_partial_next";a.ATTR_SINGLE_PAGE_ALIGN="single_page_align";a.ATTR_TOTAL_PAGES="totalPages";a.FIRST_PAGE="first-page";a.LAST_PAGE="last-page";a.$VSE_DISPLAY_STRATEGY_ELEMENT=".a-carousel-display-vse";a.$RVS_G1=".RVS_G1";a.$RVS_G2=".RVS_G2";return a}(),z=function(){function a(a,b){this.element=a;this.videoVoteConfig=b;this.countsFetched=!1;this.positiveVoteCount=0;
this.showPositiveVotes=!1;this.negativeVoteCount=0;this.showNegativeVotes=!1;this.prompt=a.find(".vse-vote-helpful-text");this.positiveVoteText=a.find(".vse-vote-positive");this.positiveVoteIcon=a.find(".vse-vote-positive-icon");this.negativeVoteText=a.find(".vse-vote-negative");this.negativeVoteIcon=a.find(".vse-vote-negative-icon");this.previousVote=e.EMPTY_STRING}a.prototype.getVoteCount=function(a){return a===e.POSITIVE_VOTE?this.positiveVoteCount:a===e.NEGATIVE_VOTE?this.negativeVoteCount:0};
a.prototype.setVoteCount=function(a,b){0>b&&(b=0);a===e.POSITIVE_VOTE?(this.positiveVoteCount=b,this.positiveVoteText.html(String(b))):a===e.NEGATIVE_VOTE&&(this.negativeVoteCount=b,this.negativeVoteText.html(String(b)));this.element.addClass("updated")};a.prototype.getPreviousVote=function(){return this.previousVote};a.prototype.setPreviousVote=function(a){if(a===e.POSITIVE_VOTE)this.positiveVoteIcon.addClass("hasvoted"),this.negativeVoteIcon.removeClass("hasvoted"),0>=this.getVoteCount(e.POSITIVE_VOTE)&&
this.setVoteCount(e.POSITIVE_VOTE,1);else if(a===e.NEGATIVE_VOTE)this.negativeVoteIcon.addClass("hasvoted"),this.positiveVoteIcon.removeClass("hasvoted"),0>=this.getVoteCount(e.NEGATIVE_VOTE)&&this.setVoteCount(e.NEGATIVE_VOTE,1);else if(a===e.NONE_VOTE)this.negativeVoteIcon.removeClass("hasvoted"),this.positiveVoteIcon.removeClass("hasvoted");else return;this.previousVote=a};a.prototype.setContentId=function(a){this.contentId=a};a.prototype.getContentId=function(){return this.contentId};a.prototype.showOrHide=
function(a,b,d,f){this.showPositiveVotes=a;this.showNegativeVotes=b;this.showPrompt=d;a?(this.positiveVoteText.addClass("show"),this.positiveVoteIcon.addClass("show")):(this.positiveVoteText.removeClass("show"),this.positiveVoteIcon.removeClass("show"));b?(this.negativeVoteText.addClass("show"),this.negativeVoteIcon.addClass("show")):(this.negativeVoteText.removeClass("show"),this.negativeVoteIcon.removeClass("show"));d?this.prompt.addClass("show"):this.prompt.removeClass("show");f?this.element.addClass("show"):
this.element.removeClass("show")};a.prototype.updateWithNewVote=function(a){if(a===e.POSITIVE_VOTE||a===e.NEGATIVE_VOTE){var b=a==e.POSITIVE_VOTE?e.NEGATIVE_VOTE:e.POSITIVE_VOTE,d=this.getVoteCount(a),f=this.getVoteCount(b);a===this.getPreviousVote()?(this.setPreviousVote(e.NONE_VOTE),this.setVoteCount(a,d-1)):this.getPreviousVote()!==e.EMPTY_STRING&&this.getPreviousVote()!==e.NONE_VOTE?(this.setVoteCount(b,f-1),this.setVoteCount(a,d+1),this.setPreviousVote(a)):(this.setPreviousVote(a),this.setVoteCount(a,
d+1))}};return a}(),L=function(){return function(a,b,n){this.contentId=a;this.positiveVoteCount=b;this.negativeVoteCount=n}}(),B=function(){return function(a){this.name="InvalidArugmentsException";this.message=a}}(),C=function(){function a(a,b){this.A=a;this.videoVoteConfig=b}a.prototype.createFromContent=function(a,b){a=this.A.$("#"+a).find('[.vse-video-votes][data-contentid\x3d"'+b+'"]');return new z(a,this.videoVoteConfig)};a.prototype.createFromSelector=function(a){var b=this.A.$(""+a);if(!b)throw new B("VideoVoteContainerFactory can not find selector by the name of "+
a+".");return new z(b,this.videoVoteConfig)};a.prototype.sendVoteToRemote=function(a,b,d){var f=this,e=this.getBasicPayload(this.videoVoteConfig),g=this.A.$.extend(e,{contentId:d,positive:a,negative:b});return new this.videoVoteConfig.dependencies.promise(function(a,b){v.sendRequest(f.A,"/vap/ew/subcomponent/votes/writing",g,function(b){a(b)},function(a){t.count("vse:votecast:failed",1);b(a)})})};a.prototype.fetchVoteHistory=function(a){var b=this,d=this.getBasicPayload(this.videoVoteConfig),f=this.A.$.extend(d,
{contentId:a});return new this.videoVoteConfig.dependencies.promise(function(a,c){v.sendRequest(b.A,"/vap/ew/subcomponent/votes/status",f,function(b){a(b)},function(a){t.count("vse:votehistory:failed",1);c(a)})})};a.prototype.convertPayloadToVoteData=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(new L(d,a[d].positive,a[d].negative));return b};a.prototype.fetchVoteCounts=function(a){var b=this,d=this.getBasicPayload(this.videoVoteConfig),f=this.A.$.extend(d,{contentIds:a});return new this.videoVoteConfig.dependencies.promise(function(a,
c){v.sendRequest(b.A,"/vap/ew/subcomponent/votes",f,function(d){d=b.convertPayloadToVoteData(d);0<d.length&&a(d);c(d)},function(a){t.count("vse:votegetcounts:failed",1);c(a)})})};a.prototype.getBasicPayload=function(a){return{placement:a.placementContext,requestId:a.requestId,sessionId:a.sessionId,page:a.page,bypassLogin:a.forceTreatment||!1}};return a}(),M=function(){function a(a){this.config=a;this.$stickies=null;this.$container=this.config.A.$(this.config.stickyHeaderContainer);this.$lbContainer=
this.config.A.$(this.config.stickyHeaderLBContainer);this.lbModalContainer=this.config.lbModalContainer;this.gutter=this.$container.offset().top;this.topPosition=this.$container.offset().top-this.$lbContainer.closest(this.lbModalContainer).offset().top}a.prototype.load=function(a){if("object"===typeof a&&0<a.length){var b=this;this.$stickies=a.each(function(a){a=b.config.A.$(this).parents(".vse-follow-wrap").length?b.config.A.$(this):b.config.A.$(this).wrap('\x3cdiv class\x3d"vse-follow-wrap" /\x3e');
a.data("originalPosition",a.offset().top+b.$container.scrollTop()-b.gutter).data("originalHeight",a.outerHeight()).parent().height(a.outerHeight(!0))});this.$container.unbind("scroll");this.$container.bind("scroll",function(){b._whenScrolling()});this.$container.scroll()}};a.prototype._whenScrolling=function(){var a=this;this.$stickies.each(function(b){b=a.config.A.$(this);var d=b.data("originalPosition"),f=a.$container.scrollTop();d<=f?b.addClass("vse-absolute").css({top:f}):b.removeClass("vse-absolute").removeAttr("style")})};
return a}(),N=function(){function a(a,b,d,f,h){var g=this;this.carouselFramework=b;this.A=d;this.contentCarouselConfig=f;this.deps=h;this.vseAssets=[];this.vseAssetIndex={};this.voteContainerIndex={};this.carouselPageSize=this.carouselTotalPages=0;this.carouselPageNumber=1;this.getplaylist=function(){return g.vseAssets.slice()};this.getActiveAsset=function(){return g.activeAsset};this.scrollTo=function(){if(g.contentCarouselConfig.hasStickyHeaders){var a=g.A.$("#"+g.contentCarouselConfig.carouselName).closest(".vse-lb-right"),
b=0;0===g.activeCard.find(".vse-vc-header.first-item").length&&(b=g.A.$(".vse-follow-wrap").first().height()-2);a.animate({scrollTop:g.activeCard.offset().top-a.offset().top+a.scrollTop()-b})}else g.A.$("#"+g.contentCarouselConfig.carouselName).animate({scrollTop:g.activeCard.offset().top-g.A.$("#"+g.contentCarouselConfig.carouselName).offset().top+g.A.$("#"+g.contentCarouselConfig.carouselName).scrollTop()})};this.rotateTo=function(a){g.markPlaying(a);g.contentCarouselConfig.isVerticalScroll&&g.scrollTo();
0!==g.carouselPageSize&&(a=g.findIndex(a),-1!==a&&(a=Math.floor(a/g.carouselPageSize)+1,g.carouselPageNumber!=a&&g.auiCarousel.gotoPage(a)))};this.markPlaying=function(a){g.activeAsset=a;g.activeCard.removeClass("active");g.activeCard=g.vseAssetIndex[a.contentId].$el.closest("li").addClass("active")};this.findIndex=function(a){return g.vseAssets.indexOf(g.vseAssetIndex[a.contentId])};this.emitRefTag=function(a,b){0<g.listOffset&&(a=(a-g.listOffset+g.vseAssets.length)%g.vseAssets.length);g.refTagRecorder.emitRefTag(b+
a)};this.destroy=function(){g.A.$("#"+g.contentCarouselConfig.carouselName+" .a-carousel-card.active").removeClass("active")};this.updateVotingElements=function(a,b){g.A.each(a,function(a){var c=g.vseAssetIndex[a.contentId].videoVoteContainer;c.setVoteCount(e.POSITIVE_VOTE,a.positiveVoteCount);c.setVoteCount(e.NEGATIVE_VOTE,a.negativeVoteCount);c.countsFetched=!0;c.showOrHide(b,b,!1,b)})};this.attachStickyHeader=function(a){g.stickyHeaders=new M(a);g.stickyHeaders.load(g.A.$(a.stickyHeaderContainer+
" .vse-vc-header.first-item"))};this.getAssetSpec=function(a,b,c){var d=a.data(),n=a.find(".vse-video-image").data("img"),n=n.replace("SR160,90_BG0,0,0_PKvse-overlay-play2","").replace("SR320,180_BG0,0,0_PKvse-overlay-play2","");return{contentId:d.asin,title:d.title,vendorName:d.vendorName,vendorCode:d.vendorCode,referenceUrl:d.referenceUrl,referenceLinkTitle:d.referenceTitle,videoUrl:d.videoUrl,$el:a,duration:d.duration,imageUrl:n,sponsored:d.sponsored,videoVoteContainer:g.voteContainerIndex[d.asin],
productAsin:d.productAsin,refTag:c+b,relatedProducts:d.relatedProducts,vendorTrackingId:d.vendorTrackingId,videoReferenceId:d.videoRefId}};var k=d.$;this.activeCard=k([]);var l=this;this.auiCarousel=a;this.refTagRecorder=new K(d);k("#"+f.carouselName).find(".a-carousel-heading").after(k("#"+f.carouselName).find(".vse-upload-link").removeClass("aok-hidden"));k("#"+f.carouselName+" .vse-video-item").each(function(a){a=l.getAssetSpec(k(this),a,l.contentCarouselConfig.refTagPrefix);l.vseAssets.push(a);
l.vseAssetIndex[a.contentId]=a});f.showVideoVotes&&f.videoVoteConfig&&(this.videoVoteContainerFactory=new C(d,f.videoVoteConfig),d.each(this.vseAssetIndex,function(a){g.voteContainerIndex[a.contentId]=g.videoVoteContainerFactory.createFromContent(g.contentCarouselConfig.carouselName,a.contentId);a.videoVoteContainer=g.voteContainerIndex[a.contentId]}));k("#"+f.carouselName+" .vse-video-card").find(e.$RVS_G1).first().addClass("first-item");k("#"+f.carouselName+" .vse-video-card").find(e.$RVS_G2).first().addClass("first-item");
k("#"+f.carouselName).delegate(".a-carousel-card a","click",function(a){if(k(this).closest("li").hasClass("active"))a.preventDefault();else{var b=l.vseAssetIndex[k(this).closest("li").find(".vse-video-item").data("asin")];l.markPlaying(b);b.eventTimestamp=Date.now();d.trigger("vse:contentCarousel:"+f.carouselName+":click",b);b=l.findIndex(b);l.emitRefTag(b,l.contentCarouselConfig.refTagPrefix);f.isPreventDefault&&a.preventDefault()}});k("#"+f.carouselName+" .vse-carousel-item").each(function(a){var b=
k(this);b.attr("href",b.data("redirect-url")+"?ref\x3d"+l.contentCarouselConfig.refTagPrefix+a)});d.off("a:carousel:"+f.carouselName+":change:pageSize");d.off("a:carousel:"+f.carouselName+":change:pageNumber");d.on("a:carousel:"+f.carouselName+":change:pageSize",function(){g.carouselPageSize=g.auiCarousel.getAttr("pageSize");g.activeAsset&&g.rotateTo(g.activeAsset)});d.trigger("a:carousel:"+f.carouselName+":change:pageSize");d.on("a:carousel:"+f.carouselName+":change:pageNumber",function(a){var b=
a.carousel;a=a.newValue;var c=b.getAttr("totalPages");b.dom.$carousel.closest(e.$VSE_DISPLAY_STRATEGY_ELEMENT).toggleClass(e.FIRST_PAGE,1===a);b.dom.$carousel.closest(e.$VSE_DISPLAY_STRATEGY_ELEMENT).toggleClass(e.LAST_PAGE,a===c);g.carouselPageNumber=g.auiCarousel.getAttr("pageNumber");d.trigger("a:carousel:"+f.carouselName+":scrollCarousel",g.carouselPageNumber,g.carouselPageSize)});d.trigger("a:carousel:"+f.carouselName+":updatePageIndex",this.carouselPageNumber,this.carouselPageSize);d.declarative(f.carouselName+
"-sm-link","click touch",function(a){k("#"+f.carouselName+" .vse-video-item .vse-carousel-item").first().click()})}a.prototype.changeStartingCardTo=function(a){var b=this;this.listOffset=this.findIndex(a);var d=this;this.A.$("#"+this.contentCarouselConfig.carouselName+" .vse-carousel-item").each(function(a){var b=d.A.$(this);a=(a-d.listOffset+d.vseAssets.length)%d.vseAssets.length;b.attr("href",b.data("redirect-url")+"?ref\x3d"+d.contentCarouselConfig.refTagPrefix+a)});this.contentCarouselConfig.isVerticalScroll||
(this.carouselFramework.initializeAll(),this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(){b.rotateTo(a)}))};return a}(),O=function(){function a(a,b,d){this.carouselFramework=a;this.A=b;this.deps=d}a.prototype.create=function(a){var b=this.carouselFramework.getCarousel(this.A.$("#"+a.carouselName));if(!b)throw new B("Carousel framework can not find carousel by the name of "+a.carouselName+".");return new N(b,this.carouselFramework,this.A,a,this.deps)};return a}(),
r=function(){function a(){}a.ELM_OTHER_OPTION=".vse-fb-other";a.ELM_RBTN_CHECKED='input[name\x3d"FeedbackInput"]:checked';a.ELM_CHECKBOX_CHECKED='input[type\x3d"checkbox"]:checked';a.DATA_REQ_MSG="requiredcommentmessage";a.DATA_OPTIONAL_MSG="optionalcommentmessage";a.ATTR_NAME_PLACEHOLDER="placeholder";return a}(),D=q,E=q;l.when("a-sheet").execute(function(a){D=a});l.when("a-popover").execute(function(a){E=a});var F={getBottomSheet:function(){return D},getPopoverFactory:function(){return E}},P=function(){function a(a){var b=
this;this.config=a;this.activeVideoSource=this.activeVideo="VIDEO_NOT_SELECTED";this.isOtherSelected=this.registered=!1;this.setBottomSheetHeight=!0;this.internalRejectedVideo=!1;this.defaultBottomSheetHeight=400;this._submitErrorCallback=function(a){b.A.trigger("vse:"+b.id+":feedback:submitted:error")};this._submitSuccessCallback=function(a){b.A.trigger("vse:"+b.id+":feedback:submitted:success")};this.A=a.A;this.pageStateName=a.pageStateName;this.buttonApi=a.buttonApi;this.id=this.config.id;this.A.state.parse();
this.A.state.replace(this.pageStateName,JSON.parse(this.A.$("script[type\x3d'a-state'][data-a-state*\x3d"+this.pageStateName+"]").html()));a=this.A.state(this.pageStateName);this.feedbackSection=this.A.$("#"+this.id);this.feedbackForm=this.A.$("#"+this.id+"-form");this.commentBox=this.A.$("#"+this.id+"-comment-box");this.requiredCommentMessage=this.commentBox.parent().data(r.DATA_REQ_MSG);this.optionalCommentMessage=this.commentBox.parent().data(r.DATA_OPTIONAL_MSG);this.thankYouSection=this.A.$("#"+
this.id+"-ty-container");this.submitButton=this.buttonApi("#"+this.id+"-btn-submit");this.cancelButton=this.A.$("#"+this.id+"-btn-cancel");a&&this.validateFormElements()&&(this.isMobile=a.isMobile,this.endpoint=a.feedbackEndpoint,this.isInternal=a.isInternal,this.marketplaceId=a.marketplaceId,this.pageAsin=a.pageAsin,this.customerId=a.customerId,this.bottomSheetFactory=F.getBottomSheet(),this.popoverFactory=F.getPopoverFactory(),this.registered||(this.A.declarative(this.id+"-options-choose","click",
function(a){b.activeSelectionEvent=a;b.A.$(a)&&b.A.$(a.$target)&&(b.currentViolations=b.A.$(a.$target).closest(".vse-fb-option").find("input").val());b.otherSection=a.$target.closest(r.ELM_OTHER_OPTION);1===b.otherSection.length?(b.updatePlaceholderString(b.requiredCommentMessage),b.isOtherSelected=!0):(b.isOtherSelected=!1,b.updatePlaceholderString(b.optionalCommentMessage));b.submitButton.enable()}),this.A.declarative(this.id+"-andoncord-check","change",function(a){b.internalRejectedVideo=a.$target.is(":checked")}),
this.A.declarative(this.id+"-btn-close","click",function(){return b.closeFeedbackForm()}),this.A.declarative(this.id+"-btn-cancel","click",function(){return b.cancelFeedbackForm()}),this.A.declarative(this.id+"-btn-submit","click",function(){return b.submitFeedback()}),this.A.on("a:sheet:afterShow:"+this.id+"-sheet",function(a){b.defaultBottomSheetHeight=.75*b.A.$(h).height();b.changeBottomSheetHeight(a,b.defaultBottomSheetHeight);b.showFeedbackForm()}),this.A.on("a:sheet:afterHide:"+this.id+"-sheet",
function(a){b.resetFeedbackForm().hideThankYou();b.A.trigger("vse:"+b.id+":feedback:hidden")}),this.A.on("a:popover:afterShow:"+this.id+"-popover",function(a){b.showFeedbackForm()}),this.A.on("a:popover:afterHide:"+this.id+"-popover",function(a){b.hideFeedbackForm()}),this.registered=!0))}a.prototype.showFeedbackForm=function(a){this.A.trigger("vse:"+this.id+":feedback:shown");return this};a.prototype.hideFeedbackForm=function(){this.isMobile?this.getAndSetBottomSheetInstance()&&this.bottomSheetInstance.hide():
this.getAndSetPopoverInstance()&&this.popoverInstance.hide();this.resetFeedbackForm().hideThankYou();this.A.trigger("vse:"+this.id+":feedback:hidden");return this};a.prototype.setActiveVideoAndSource=function(a,b){this.activeVideo=a;this.activeVideoSource=b};a.prototype.submitFeedback=function(){if(this.isOtherSelected&&this.commentBox&&""===this.commentBox.val())this.commentBox.focus();else{var a={events:[{data:{feedback:{additionalComments:this.commentBox?this.commentBox.val():"",playerVersion:"",
asin:this.pageAsin,videoId:this.activeVideo,videoSource:this.activeVideoSource,violations:this.currentViolations,url:document.location.href,userAgent:h.navigator&&h.navigator.userAgent?h.navigator.userAgent:"window.navigator.userAgent not supported",feedbackTime:this.A.now(),customerId:this.customerId,isInternal:this.isInternal,feedbackWidgetVersion:"2",marketplace:this.marketplaceId,internalRejectedVideo:this.internalRejectedVideo}}}]};this.A.$.ajax({url:this.endpoint,data:JSON.stringify(a),type:"POST",
contentType:"application/json; charset\x3dutf-8",error:this._submitErrorCallback,success:this._submitSuccessCallback});this.A.trigger("vse:"+this.id+":feedback:submitted");this.resetFeedbackForm().showThankYou()}};a.prototype.cancelFeedbackForm=function(){this.resetFeedbackForm();this.A.trigger("vse:"+this.id+":feedback:cancelled")};a.prototype.closeFeedbackForm=function(){this.hideFeedbackForm();this.A.trigger("vse:"+this.id+":feedback:closed")};a.prototype.resetFeedbackForm=function(){this.submitButton.disable();
this.feedbackSection.find(r.ELM_RBTN_CHECKED).each(function(){this.checked=!1});this.updatePlaceholderString(this.optionalCommentMessage);this.commentBox.val("");this.internalRejectedVideo=!1;this.feedbackSection.find(r.ELM_CHECKBOX_CHECKED).each(function(){this.checked=!1});return this};a.prototype.showThankYou=function(){this.feedbackForm.fadeOut(200);this.thankYouSection.addClass("show").removeClass("aok-hidden").fadeIn(400);this.A.trigger("vse:"+this.id+":thank-you:shown");return this};a.prototype.hideThankYou=
function(){this.feedbackForm.fadeIn(10);this.thankYouSection.addClass("aok-hidden").removeClass("show").fadeOut(10);this.A.trigger("vse:"+this.id+":thank-you:hidden");return this};a.prototype.validateFormElements=function(){return this.feedbackSection.length&&this.commentBox.length&&this.thankYouSection.length&&this.submitButton.size()&&this.cancelButton.length&&this.feedbackForm.length};a.prototype.updatePlaceholderString=function(a){this.commentBox.attr(r.ATTR_NAME_PLACEHOLDER,a)};a.prototype.changeBottomSheetHeight=
function(a,b){this.setBottomSheetHeight&&(a.sheet.changeHeight({duration:.3,height:b}),this.setBottomSheetHeight=!1)};a.prototype.getAndSetBottomSheetInstance=function(){return this.bottomSheetFactory?this.bottomSheetInstance?this.bottomSheetInstance:this.bottomSheetInstance=this.bottomSheetFactory.get(this.id+"-sheet"):q};a.prototype.getAndSetPopoverInstance=function(){return this.popoverFactory?this.popoverInstance?this.popoverInstance:this.popoverInstance=this.popoverFactory.get(this.id+"-popover"):
q};return a}(),Q=function(){function a(a){this.config=a;this.feedbackWidgets={}}a.prototype.create=function(a,b){b=this.feedbackWidgets[a]||new P({id:a,pageStateName:b,A:this.config.A,buttonApi:this.config.buttonApi});return this.feedbackWidgets[a]=b};a.prototype.get=function(a){return this.feedbackWidgets[a]};return a}(),m=function(){function a(){}a.WIDTH_ASPECT_RATIO=1.77;a.EMPTY_STRING="";a.ibMetadata=".vse-md-container.vse-ib-metadata";a.metaDataContainer=".vse-md-container";a.metaDataCustomerProfile=
".vse-md-customer-profile";a.videoInformationContainer=".vse-md-container .vse-md-title .vse-title";a.titlePrefixContainer=".vse-md-container .vse-md-title .vse-title-prefix";a.currentItemPrefixContainer=".vse-video-title-prefix-text";a.mobileMovableContainer=".vse-vb-movable-container";a.mobileFixedContainer=".vse-mobile-fixed-container";a.videoPlayerContainer=".vse-airy-container";a.viewVideosLinkClickedMetricName="vseMediaBlockButtonClicked_viewVideosLink";a.videoActionStrip=".vse-player-container .vse-video-action-strip";
a.socialSharePageStateName="vse-nilgiri-social-share";a.socialShareClickMetricName="vseSocialShareClickImageBlock";a.vendorCRCode="AOD60";return a}(),b={vars:{A:{},isMobile:!1,relatedVideosCarousel:null,newHref:"",newrefTag:"dp_vse_ib",activeVideoVoteContainer:null,sushiMetricsConfig:null,buildSushiPayload:null,videoVoteContainerFactory:null,hasGroups:!1,showVotes:!1,forceMobileResize:!1,ibCarouselName:"#vse-ib-rvs",playerInstance:null,isMshop:!1,mShopFactory:null,isFeedbackClosed:!0},resizeMobilePopover:function(){var a=
b.vars.A.$,c=a(h).height();if(b.vars.hasGroups||b.vars.forceMobileResize){var e=a(m.mobileFixedContainer).outerHeight(!0);a(m.mobileMovableContainer).css({"max-height":c-e,top:e});a(b.vars.ibCarouselName).removeAttr("style")}else{var e=a(m.videoPlayerContainer).outerHeight(!0)+a(".immersive-view-back-button").outerHeight(!0)+a(".vse-md-container").outerHeight(!0),d=a(m.mobileFixedContainer).outerHeight(!0);a(b.vars.ibCarouselName).css({"max-height":c-d,top:e})}},resizeImmersiveView:function(){var a=
b.vars.A.$("#ivVideoBlock"),c=b.vars.A.$("#ivVideosTab").height();a.css("height",c);var e=a.find(".vse-video-block"),d=c-b.getDimension(a,"padding-top")-b.getDimension(a,"padding-bottom");e.css({"max-height":c,overflow:"hidden"});c=a.find(m.videoPlayerContainer);a=a.find(m.ibMetadata);d=Math.floor(d-b.getDimension(a,"height"));e=Math.floor(d*m.WIDTH_ASPECT_RATIO);c.css({"max-height":d,"max-width":e});a.css("max-width",e);b.vars.A.$(m.videoActionStrip).css({"max-width":c.width()})},updateMediaInfo:function(a){b.vars.A.$(m.videoInformationContainer).text(a.title);
b.vars.showVotes&&(b.updateActiveVideoVoteContainer(a),b.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0))},resizeVideoImmersiveView:function(){b.vars.isMobile?b.resizeMobilePopover():b.resizeImmersiveView()},updateActiveVideoVoteContainer:function(a){b.vars.showVotes&&(b.vars.activeVideoVoteContainer.setContentId(a.contentId),b.vars.activeVideoVoteContainer.setVoteCount(e.POSITIVE_VOTE,a.videoVoteContainer.getVoteCount(e.POSITIVE_VOTE)),b.vars.activeVideoVoteContainer.setVoteCount(e.NEGATIVE_VOTE,
a.videoVoteContainer.getVoteCount(e.NEGATIVE_VOTE)),b.fetchAndUpdateVotingCount(),b.fetchAndUpdateVotingHistory())},castVote:function(a){if(b.vars.videoVoteContainerFactory&&b.vars.videoVoteContainerFactory.videoVoteConfig){var c=b.vars.activeVideoVoteContainer.getPreviousVote(),h=a===e.POSITIVE_VOTE&&c!=e.POSITIVE_VOTE,c=a===e.NEGATIVE_VOTE&&c!=e.NEGATIVE_VOTE;b.vars.activeVideoVoteContainer.updateWithNewVote(a);b.vars.videoVoteContainerFactory.sendVoteToRemote(h,c,b.vars.activeVideoVoteContainer.getContentId()).then(function(c){b.vars.videoVoteContainerFactory&&
b.vars.videoVoteContainerFactory.videoVoteConfig&&b.vars.A.trigger(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast",a)},function(c){t.count("ibiv.videovote.votecastfailure",1);b.vars.activeVideoVoteContainer.updateWithNewVote(a)})}},getDimension:function(a,b){a=parseInt(a.css(b),10);return isNaN(a)?0:a},isDefined:function(a){return"undefined"!==typeof a&&null!==a},fetchAndUpdateVotingHistory:function(){var a=b.vars.relatedVideosCarousel.getActiveAsset();a.videoVoteContainer&&
(a.videoVoteContainer.getPreviousVote()!==e.EMPTY_STRING?b.vars.activeVideoVoteContainer.setPreviousVote(a.videoVoteContainer.getPreviousVote()):b.vars.videoVoteContainerFactory.fetchVoteHistory(a.contentId).then(function(c){b.vars.videoVoteContainerFactory===q||c!==e.POSITIVE_VOTE&&c!==e.NEGATIVE_VOTE&&c!==e.NONE_VOTE||(b.vars.activeVideoVoteContainer.setPreviousVote(c),a.videoVoteContainer.setPreviousVote(c))},function(a){t.count("ibiv.videovote.votehistoryfailure",1)}))},fetchAndUpdateVotingCount:function(){var a=
b.vars.relatedVideosCarousel.getActiveAsset();a.videoVoteContainer&&!a.videoVoteContainer.countsFetched&&b.vars.videoVoteContainerFactory.fetchVoteCounts([a.contentId]).then(function(c){b.vars.relatedVideosCarousel.updateVotingElements(c,!1);for(var h=0;h<c.length;h++)if(c[h].contentId===a.contentId){a.videoVoteContainer.setVoteCount(e.POSITIVE_VOTE,c[h].positiveVoteCount);a.videoVoteContainer.setVoteCount(e.NEGATIVE_VOTE,c[h].negativeVoteCount);a.videoVoteContainer.countsFetched=!0;b.vars.activeVideoVoteContainer.setVoteCount(e.POSITIVE_VOTE,
c[h].positiveVoteCount);b.vars.activeVideoVoteContainer.setVoteCount(e.NEGATIVE_VOTE,c[h].negativeVoteCount);break}b.vars.activeVideoVoteContainer.countsFetched=!0;b.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0);b.vars.isMobile?b.resizeMobilePopover():b.resizeImmersiveView()},function(a){t.count("ibiv.videovote.votecountfailure",1);b.vars.A.trigger(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-hide-votes")})},getCurrentlyPlayingVideoInCarousel:function(a){a=b.vars.relatedVideosCarousel.getplaylist()[a];
b.vars.relatedVideosCarousel.markPlaying(a);return a},showFeedbackLink:function(a,c){b.vars.A.$(a).css({display:"inline-block"});b.vars.A.$(c).addClass("dim-video-player")},hideFeedbackLink:function(a,c){b.vars.A.$(a).css({display:"none"});b.vars.A.$(c).removeClass("dim-video-player")},refreshSocialSharePageState:function(a){var c=b.constructShareBaseUrl()+a.contentId;b.vars.A.state.replace(m.socialSharePageStateName,{pageLevelData:{clientRef:"ib",deviceTypeRef:b.vars.isMobile?"mb":"dt"},url:c,image:a.imageUrl,
title:a.title,description:a.title})},getMshopShareParams:function(a){var c=b.constructShareBaseUrl()+a.contentId;a=a.title+" "+c;var e="\x3cdiv\x3e \x3cp\x3e"+a+" "+c+"\x3c/p\x3e \x3c/div\x3e";return{subject:a,messagePlain160:a.substring(0,160),messagePlain140:a.substring(0,140),messageHTML:e,messagePlain:a,url:c}},constructShareBaseUrl:function(){return(b.isDefined(h.location.origin)?h.location.origin:"https://www.amazon.com")+"/vdp/"}},R=function(){function a(a,b){this.brilaFactory=a;this.config=
b}a.prototype.embed=function(){var a=this,b=document.getElementById(this.config.parentId),d=this.config.parentId+"-element",f=document.createElement("video");f.id=d;f.className="video-js brila-video-js";f.setAttribute("playsinline","true");this.config.shouldDisableControls||f.setAttribute("controls","true");this.config.shouldAutoplay&&f.setAttribute("autoplay","true");this.config.shouldStartMuted&&f.setAttribute("muted","true");b.appendChild(f);this.videoJS=this.brilaFactory.embed(d,this.config);
document.getElementById(d).setAttribute("style","width:100%; height:100%;");this.videoJS.src(this.config.mediaSourceInfo[0]);this.vseMetrics=this.brilaFactory.metrics(this.videoJS);this.config.videoAds.isEngineEnabled&&(this.vseAds=this.brilaFactory.ads(this.videoJS));this.videoJS.on("play",function(){a.config.bindings.play()});this.videoJS.on("firstplay",function(){a.config.bindings.play()});this.videoJS.on("fullscreenchange",function(){a.videoJS.isFullscreen()?a.config.bindings.fullscreen():a.config.bindings.normalscreen()});
return this.wrapper()};a.prototype.wrapper=function(){var a=this;return{attach:function(a){},isFullScreen:function(){return a.videoJS.isFullscreen()},enterFullScreen:function(){a.videoJS.requestFullscreen()},enterFullWindow:function(){a.videoJS.enterFullWindow()},enterNormalScreen:function(){a.videoJS.exitFullscreen()},play:function(e){b.isDefined(e)&&b.isDefined(e.eventTimestamp)&&a.vseMetrics.setPageLoadStartTimestamp(e.eventTimestamp);return a.videoJS.play()},pause:function(){a.videoJS.pause()},
loadMedia:function(b){var d=b.contentId,e=b.mediaSourceInfo[0],h=b.refTag?b.refTag:"";b={vendorTrackingId:b.vendorTrackingId,videoReferenceId:b.videoReferenceId,productAsin:b.productAsin};a.vseMetrics.setRefTag&&a.vseMetrics.setRefTag(h);a.vseMetrics.setContentId&&a.vseMetrics.setContentId(d);a.vseMetrics.setOspAttribution&&a.vseMetrics.setOspAttribution(b);a.config.videoAds.isEngineEnabled&&a.vseAds.setContentId(d);a.videoJS.src(e)},destroy:function(){a.videoJS.dispose()}}};return a}();try{var U=
function(a){return new a(function(a,k){l.when("A","a-carousel-framework","3p-promise","a-button","ready").register("VSECommonComponentAssets",function(d,f,k,g){var q,p,n,r;b.vars.A=d;var u;b.vars.A.on("vseAiry",function(){l.when("mash").execute("NilgiriService-Mash-Detection",function(a){b.vars.A.$(".vse-video-block").addClass("mshop");b.isMshop=!0;b.mShopFactory=a})});b.vars.A.on.orientationchange(function(a){if(0===a.orientation){a=a.height;var c=b.vars.A.$(m.mobileFixedContainer).outerHeight(!0);
b.vars.A.$("#"+p).css({"max-height":a-c,top:c})}});return{initCarousel:function(){try{b.vars.A.state.parse();b.vars.A.state.replace("dp_vse_rvc",JSON.parse(b.vars.A.$("script[type\x3d'a-state'][data-a-state*\x3ddp_vse_rvc]").html()));var a=b.vars.A.state("dp_vse_rvc");if(a){var c={gatedP:y,promise:k},g=new O(f,d,c);f.createAll();f.initializeAll();b.vars.relatedVideosCarousel=g.create(a);b.vars.ibCarouselName="#"+a.carouselName;var l=d.$.extend({},a.videoVoteConfig);l.hasOwnProperty("placementContext")&&
(l.dependencies=c,b.vars.videoVoteContainerFactory=new C(d,l),b.vars.activeVideoVoteContainer=b.vars.videoVoteContainerFactory.createFromSelector("#vse-video-votes-lb-details-"+l.placementContext));p=a.carouselName;var n=b.vars.A.state("vse-nilgiri-social-share"),w=b.isDefined(n)?n.clientPrefix:"vse-iv";b.vars.A.on("vse:contentCarousel:"+p+":click",function(a){var c={mediaSourceInfo:[a.videoUrl],contentId:a.contentId,refTag:a.refTag?a.refTag:"",vendorTrackingId:a.vendorTrackingId,videoReferenceId:a.videoReferenceId,
productAsin:a.productAsin};b.isDefined(b.playerInstance)&&(b.playerInstance.attach(q),b.playerInstance.loadMedia(c),b.playerInstance.play({isAsync:!0,eventTimestamp:(new Date).getTime()}),b.updateMediaInfo(a),b.resizeVideoImmersiveView(),b.refreshSocialSharePageState(a),b.isDefined(r)&&r.setActiveVideoAndSource(a.contentId,a.vendorCode))});var G=b.getCurrentlyPlayingVideoInCarousel(0);if(b.vars.A.$("#image-block-video-carousel").length)var T=b.vars.A.$("#image-block-video-carousel-pagination-dots ul li.a-selected").index(),
G=b.getCurrentlyPlayingVideoInCarousel(T);b.vars.A.on("a:popover:afterShow:video-immersive-view",function(){if(b.vars.A.$("#image-block-video-carousel").length){var a=b.vars.A.$("#image-block-video-carousel-pagination-dots ul li.a-selected").index(),a=b.getCurrentlyPlayingVideoInCarousel(a);b.updateMediaInfo(a);b.refreshSocialSharePageState(a)}});var x=b.vars.relatedVideosCarousel.getActiveAsset();b.vars.showVotes=b.vars.videoVoteContainerFactory&&b.vars.videoVoteContainerFactory.videoVoteConfig&&
x&&x.videoVoteContainer&&!b.vars.videoVoteFailure&&(b.vars.isMobile||!b.vars.hasGroups);b.refreshSocialSharePageState(x);b.isMshop&&b.isDefined(b.mShopFactory)&&b.vars.A.declarative(w+"-social-share-mshop-action","click touch",function(a){a=b.vars.relatedVideosCarousel.getActiveAsset();a=b.getMshopShareParams(a);b.mShopFactory.share(a)});b.vars.showVotes&&(b.updateActiveVideoVoteContainer(b.vars.relatedVideosCarousel.getActiveAsset()),b.vars.A.on(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+
"-hide-votes",function(){b.vars.activeVideoVoteContainer.showOrHide(!1,!1,!1,!1);b.vars.videoVoteFailure=!0}),b.vars.A.off("a:declarative:"+(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-positive")+":click"),b.vars.A.off("a:declarative:"+(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-negative")+":click"),b.vars.A.declarative(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-positive","click",function(){b.castVote(e.POSITIVE_VOTE)}),
b.vars.A.declarative(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-negative","click",function(){b.castVote(e.NEGATIVE_VOTE)}),b.vars.A.on(b.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast",function(a){var c=a===e.POSITIVE_VOTE?e.NEGATIVE_VOTE:e.POSITIVE_VOTE,d=b.vars.relatedVideosCarousel.getActiveAsset(),f=e.EMPTY_STRING;d&&d.videoVoteContainer&&(f=d.videoVoteContainer.getPreviousVote()===a?"cancel:"+a:d.videoVoteContainer.getPreviousVote()===e.POSITIVE_VOTE||
d.videoVoteContainer.getPreviousVote()===e.NEGATIVE_VOTE?"switch-"+c+"-to-"+a:a,d.videoVoteContainer.updateWithNewVote(a));b.vars.sushiMetricsConfig&&b.vars.sushiMetricsConfig.endpoint!==m.EMPTY_STRING&&(a=b.vars.buildSushiPayload({eventName:"ibiv.videovote.castvote:"+f,stringPayload:m.EMPTY_STRING,intPayload:1,videoAsin:d.contentId}),t.emitSushiMetric(a,b.vars.sushiMetricsConfig.endpoint))}));b.vars.A.off("a:declarative:"+w+"-swf-share-network:click");b.vars.A.on("a:declarative:"+w+"-swf-share-network:click",
function(a){b.vars.relatedVideosCarousel.getActiveAsset();a=a.data;var c=b.vars.A.state(m.socialSharePageStateName);J.share(c,a.network);t.count(m.socialShareClickMetricName,1)});b.vars.isMobile&&(b.updateMediaInfo(G),b.resizeVideoImmersiveView())}}catch(S){h.ueLogError&&h.ueLogError(S,{logLevel:"FATAL",attribution:"vse-nilgiri-service",message:"InitializeVSECarousel: "})}},initPlayer:function(){try{var a=!1;b.vars.A.state.parse();b.vars.A.state.replace("vse_dp_airy",JSON.parse(b.vars.A.$("script[type\x3d'a-state'][data-a-state*\x3dvse_dp_airy]").html()));
var c=b.vars.A.state("vse_dp_airy");if(c){u={onScreenChange:function(){a=!1;b.vars.A.trigger("vsePlayerScreenChange",a)},onFullScreen:function(){a=!0;b.vars.A.$("#vse-ns-airy-container-element video").removeClass("dim-video-player")},onPlay:function(){b.isDefined(b.playerInstance)&&"true"===e.enableFullScreenByDefault.toLowerCase()&&!b.playerInstance.isFullScreen()&&b.playerInstance.enterFullScreen({isAsync:!0});b.vars.isMobile&&b.hideFeedbackLink("#div-feedback","#vse-ns-airy-container-element video")}};
var d=c.foresterConfiguration,e=c.playerConfiguration;b.vars.isMobile=c.isMobile;var f={contentId:d.contentId,customerId:c.sushiMetricsConfig.customerId,foresterMetadataParams:{client:d.client,marketplaceId:d.marketplaceId,method:d.method,requestId:d.requestId,session:d.sessionId},mediaSourceInfo:[c.videoUrl],pageAsin:d.pageAsin,parentId:c.id,bindings:{play:function(){return u.onPlay()},normalscreen:function(){return u.onScreenChange()},fullscreen:function(){return u.onFullScreen()}}};c.sushiMetricsConfig&&
c.sushiMetricsConfig.endpoint!==m.EMPTY_STRING&&(f.sushiMetricsConfig=c.sushiMetricsConfig);b.vars.A.$("#image-block-media-view-videos-link-row a").click(function(){t.count(m.viewVideosLinkClickedMetricName,1)});b.vars.A.on("a:popover:afterShow:video-immersive-view",function(){b.vars.A.$("body").addClass("vse-lb-no-scroll");b.isMshop&&b.isDefined(b.mShopFactory)&&b.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})});b.vars.A.on("a:popover:beforeHide:video-immersive-view",function(){b.vars.A.$("body").removeClass("vse-lb-no-scroll");
b.isMshop&&b.isDefined(b.mShopFactory)&&b.mShopFactory.dispatchEvent({type:"appOverlays.Show"})});q=c.id;l.when("brila").execute("NS-Brila-Player",function(a){b.isDefined(b.playerInstance)&&"function"===typeof b.playerInstance.destroy&&b.playerInstance.destroy();var c=b.vars.A.$.extend({},f,{videoAds:{isEngineEnabled:!1},shouldStartMuted:!1,shouldAutoplay:!1,shouldDisableControls:!1});a=new R(a,c);b.playerInstance=a.embed();b.vars.A.trigger("vseAiry",{airy:b.playerInstance,containerId:q});b.vars.A.declarative("a-secondary-view",
"click touch",function(a){"video-immersive-view"===a.data.name&&b.isDefined(b.playerInstance)&&!b.playerInstance.isFullScreen()&&(n=b.vars.A.$("#image-block-video-carousel").length?b.vars.A.$("#image-block-video-carousel li .vse-video-element").closest("a.video-data-wrapper").data():b.vars.A.$("#image-block li .vse-video-element").closest("a.video-data-wrapper").data(),("true"===e.enableFullScreenByDefault.toLowerCase()||b.isDefined(n)&&1===n.videoCount)&&b.playerInstance.enterFullScreen())})});var g=
b.vars.A.$("#div-feedback");b.vars.A.$("#vse-ns-airy-container").append(g);var k=I.fetchLatestPageState(b.vars.A,"videoInformation-vse_ib_iv");k&&k.sushiMetricsConfig&&(b.vars.sushiMetricsConfig=k.sushiMetricsConfig,b.vars.buildSushiPayload=H.makeApplicationSushiPayloadBuilder(b.vars.A,b.vars.sushiMetricsConfig))}}catch(p){h.ueLogError&&h.ueLogError(p,{logLevel:"FATAL",attribution:"vse-nilgiri-service",message:"InitializePlayer: "})}},initFeedback:function(a){try{r=(new Q({A:d,buttonApi:g})).create(a,
"vse-ns-feedback-ImageBlock");var c=b.vars.A.state("vse_dp_airy").foresterConfiguration.contentId,e=b.vars.A.state("vse_dp_airy").vendorCode;r.setActiveVideoAndSource(c,e);var f=!1;d.declarative.create(b.vars.A.$("#vse-ns-airy-container"),"feedback-overlays-player",{});b.vars.A.declarative("feedback-overlays-player","mouseenter touchstart focus",function(a){(b.vars.isFeedbackClosed||b.vars.isMobile)&&b.showFeedbackLink("#div-feedback","#vse-ns-airy-container-element video");f=!0});b.vars.A.declarative("feedback-overlays-player",
"mouseleave",function(a){(b.vars.isFeedbackClosed||b.vars.isMobile)&&b.hideFeedbackLink("#div-feedback","#vse-ns-airy-container-element video");f=!1});b.vars.A.on("vse:"+a+":feedback:shown",function(){b.playerInstance.pause();b.vars.isFeedbackClosed=!1});b.vars.A.on("vse:"+a+":feedback:hidden",function(){b.playerInstance.play();b.vars.isFeedbackClosed=!0;f||b.hideFeedbackLink("#div-feedback","#vse-ns-airy-container-element video");b.isMshop&&b.isDefined(b.mShopFactory)&&d.delay(function(){b.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})},
500)})}catch(k){h.ueLogError&&h.ueLogError(k,{logLevel:"FATAL",attribution:"vse-nilgiri-service",message:"InitializeVSEFeedback: "})}},_noneFeature:a()}})})};l.when("A","3p-promise").execute("VSE-gatedP-register-ns-client",function(a,b){y.register("VSECommonComponentAssets","VSE-NS-client-registered",U,b)})}catch(a){h.ueLogError&&h.ueLogError(a,{logLevel:"ERROR",attribution:"vse-nilgiri-service",message:"NSE: "})}})()});